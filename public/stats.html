<html>
    <head>
        <meta name="apple-itunes-app" content="app-id=1156149609, app-clip-bundle-id=com.fedegarlo.salva.Clip">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<link rel="icon" href="logo.png?v=2">
		<link rel="apple-touch-icon" href="logo.png?v=2">
<!-- HTML Meta Tags -->
<title>Salva. Ahorra en tus compras por Internet.</title>
<meta name="description" content="Aplicación para iOS que te ayuda a gestionar tus listas de deseos y te avisa cuando los productos bajan de precio. Establece un precio objetivo y ahorra.">

<!-- Facebook Meta Tags -->
<meta property="og:url" content="https://www.getsalva.com/stats">
<meta property="og:type" content="website">
<meta property="og:title" content="Salva Metrics">
<meta property="og:description" content="Aplicación para iOS que te ayuda a gestionar tus listas de deseos y te avisa cuando los productos bajan de precio. Establece un precio objetivo y ahorra.">
<meta property="og:image" content="https://salva-api.herokuapp.com/og.png">

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="getsalva.com">
<meta property="twitter:url" content="https://www.getsalva.com/">
<meta name="twitter:title" content="Salva Metrics">
<meta name="twitter:description" content="Aplicación para iOS que te ayuda a gestionar tus listas de deseos y te avisa cuando los productos bajan de precio. Establece un precio objetivo y ahorra.">
<meta name="twitter:image" content="https://salva-api.herokuapp.com/og.png">

<!-- Meta Tags Generated via https://www.opengraph.xyz -->
      
    </head>
<body style="font-family: Arial, Helvetica, sans-serif;">
	<h2 style="text-align: center; padding-top: 10px;">Salva Metrics</h2>
	<div style="height:320px;max-width:400px">
		<canvas height="240" id="myChart_2" ></canvas>
	</div>
	<div style="height:320px;max-width:400px">
		<canvas height="240" id="myChart"></canvas>
	</div>
	<div id="metrics" style="display: none; text-align: center;">
		<p>
			Monthly Active Users
		</p>
		<p>
			<span id="actives" style="font-size: 24px;"></span>
		</p>
	</div>
</body>
<script src="js/chart.min.js"></script>
<script>
	var opts = {
	method: 'GET',      
	headers: {}
	};
	fetch('https://salva-watcher.herokuapp.com/plainstats', opts).then(function (response) {
	return response.json();
	})
	.then(function (body) {
		data.datasets[0].data = body.productsAdded;
		data.datasets[1].data = body.movedToPurchased;
		data.datasets[2].data = body.deletes;
		data2.datasets[0].data = body.notifications;
		data2.datasets[1].data = body.visits;
		data2.datasets[2].data = body.clicks;
		document.getElementById("actives").innerHTML = body.users.monthlyActives;
		document.getElementById("metrics").style.display = "block";
		const myChart = new Chart(ctx, {
			type: 'bar',
			data: data,
			options: {
			plugins: {
				title: {
					display: true,
					text: 'Uso de la app'
				}
			}
		}
		});
		const myChart2 = new Chart(ctx2, {
			type: 'bar',
			data: data2,
			options: {
			plugins: {
				title: {
					display: true,
					text: 'Conversión'
				}
			}
		}
		});
	});
	const ctx = document.getElementById('myChart').getContext('2d');
	const ctx2 = document.getElementById('myChart_2').getContext('2d');
	const labels = ["Anteayer", "Ayer","Hoy"];
	let data = {
	labels: labels,
	datasets: [{
		label: 'Añadidos',
		backgroundColor: 'rgb(0, 204, 204,1)'
	},
	{
		label: 'Comprados',
		backgroundColor: 'rgb(0, 204, 102,1)'
	},
	{
		label: 'Eliminados',
		backgroundColor: 'rgb(255, 0, 127,1)'
	}]
	};
	let data2 = {
	labels: labels,
	datasets: [
	{
		label: 'Notificaciones x10',
		backgroundColor: 'rgb(31, 156, 240,1)'
	},
	{
		label: 'Visitas',
		backgroundColor: 'rgb(1, 101, 169,1)'
	},
	{
		label: 'Clicks',
		backgroundColor: 'rgb(206, 157, 107,1)'
	}]
	};
	</script>
</html>